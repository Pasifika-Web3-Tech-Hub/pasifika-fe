(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{7975:function(e,s,a){Promise.resolve().then(a.bind(a,92328))},92328:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return TreasuryManagement}});var n=a(57437),r=a(2265),t=a(37374),c=a(79471),i=a(79352),l=a(16691),d=a.n(l),o=a(61396),h=a.n(o);a(98065),a(90668),a(75185);var u=a(99835),m=a(45233),x=a(93579),f=a(60127);function TreasuryManagement(){let{isDarkMode:e}=(0,t.v)(),{primaryWallet:s,setShowAuthFlow:a}=(0,c.SX)(),[l,o]=(0,r.useState)(!1),[j,v]=(0,r.useState)(""),[g,N]=(0,r.useState)(""),[b,p]=(0,r.useState)(""),[y,F]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[A,w]=(0,r.useState)([]),[S,D]=(0,r.useState)(!1),[M,T]=(0,r.useState)(!1),{treasuryFunds:E,feeCollectors:P,isAdmin:B,isTreasurer:L,isLoading:I,refetch:R}=function(){let{address:e}=(0,u.m)(),{data:s,isLoading:a,refetch:n}=(0,m.u)({address:f.rA.address,abi:f.rA.abi,functionName:"getFunds",query:{enabled:!!e}}),{data:r,isLoading:t,refetch:c}=(0,m.u)({address:f.rA.address,abi:f.rA.abi,functionName:"getFeeCollectors",query:{enabled:!!e}}),{data:i,isLoading:l}=(0,m.u)({address:f.rA.address,abi:f.rA.abi,functionName:"hasRole",args:["0x0000000000000000000000000000000000000000000000000000000000000000",e],query:{enabled:!!e}}),{data:d,isLoading:o}=(0,m.u)({address:f.rA.address,abi:f.rA.abi,functionName:"hasRole",args:["0x5c27b768db8b6766ba238c99164c0588576f0a6eb61af3b2877f74d3891a283c",e],query:{enabled:!!e}});return{treasuryFunds:s||[],feeCollectors:r||[],isAdmin:!!i,isTreasurer:!!d,isLoading:a||t||l||o,refetch:()=>{n(),c()}}}(),{createFund:_,registerFeeCollector:H,withdrawFromFund:q,isPending:O,isSuccess:W,isError:Y,error:G}=function(){let{writeContractAsync:e,isPending:s,isSuccess:a,isError:n,error:r}=(0,x.S)(),registerFeeCollector=async(s,a)=>e({address:f.rA.address,abi:f.rA.abi,functionName:"registerFeeCollector",args:[s,a]}),createFund=async(s,a)=>e({address:f.rA.address,abi:f.rA.abi,functionName:"createFund",args:[s,a]}),withdrawFromFund=async(s,a,n)=>e({address:f.rA.address,abi:f.rA.abi,functionName:"withdrawFromFund",args:[s,a,n]});return{registerFeeCollector,createFund,withdrawFromFund,isPending:s,isSuccess:a,isError:n,error:r}}(),K=E?E.reduce((e,s)=>e+BigInt(s.balance),BigInt(0)):BigInt(0),U=E?E.length:0,V=P?P.length:0;(0,r.useEffect)(()=>{s?o(!0):o(!1)},[s]),(0,r.useEffect)(()=>{W&&(F("Transaction successful!"),D(!1),setTimeout(()=>{R()},2e3),v(""),N("")),Y&&G&&(p("Error: ".concat(G.message)),D(!1))},[W,Y,G,R]),(0,r.useEffect)(()=>{if(l&&E&&!M){let e=[];for(let s=0;s<5;s++){let s=["deposit","withdrawal","transfer"],a=s[Math.floor(Math.random()*s.length)],n=(2*Math.random()).toFixed(4),r=new Date(Date.now()-2592e6*Math.random()).toLocaleDateString(),t="0x".concat(Math.random().toString(16).substring(2,12)),c=E.length>0?E[Math.floor(Math.random()*E.length)].name:"General Fund";e.push({from:t,amount:n,type:a,date:r,fund:c})}w(e),T(!0)}},[l,E,M]);let X=(0,r.useCallback)(async()=>{if(!j||!g){p("Please fill in all fields");return}try{D(!0),p(""),F("");let e=await _(j,BigInt(0));e&&k(e)}catch(e){console.error("Error creating fund:",e),p("Error: ".concat(e.message)),D(!1)}},[j,g,_]);return(0,n.jsxs)("div",{className:"container ".concat(e?"dark":"light"),children:[(0,n.jsx)("div",{className:"header",children:(0,n.jsxs)("div",{className:"header-container",children:[(0,n.jsxs)("div",{className:"logo",children:[(0,n.jsx)(d(),{src:"/pasifika.png",alt:"Pasifika",width:50,height:50}),(0,n.jsx)("div",{className:"logo-text",children:(0,n.jsx)("span",{className:"logo-accent",children:"Pasifika"})})]}),(0,n.jsx)("div",{className:"nav-menu",children:(0,n.jsx)("div",{className:"nav-item",children:(0,n.jsx)(h(),{href:"/our-services",className:"nav-link-button",children:"Back to Services"})})})]})}),(0,n.jsx)("div",{style:{height:"100px"}}),(0,n.jsxs)("div",{className:"page-banner",children:[(0,n.jsx)("h1",{children:"Treasury Management"}),(0,n.jsx)("p",{children:"Manage treasury funds, monitor transactions, and oversee fee collections"})]}),(0,n.jsxs)("div",{className:"funding-highlight",children:[(0,n.jsx)("div",{className:"funding-badge",children:"Seed Funded"}),(0,n.jsx)("h3",{children:"RootStock Hactivator Program Contribution"}),(0,n.jsx)("p",{children:"Our seed funding was secured through our successful participation and contribution to the RootStock (RSK) Hactivator Program, supporting our multi-chain infrastructure development."})]}),(0,n.jsxs)("div",{className:"content-container",children:[l?I?(0,n.jsx)("div",{className:"loading-container",children:(0,n.jsx)("p",{children:"Loading treasury data..."})}):(0,n.jsxs)("div",{className:"treasury-container",children:[(0,n.jsx)("h3",{children:"Treasury Overview"}),(0,n.jsxs)("div",{className:"treasury-stats",children:[(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"\uD83D\uDCB0"}),(0,n.jsxs)("div",{className:"stat-value",children:[(0,i.d)(K||BigInt(0)).substring(0,6)," ETH"]}),(0,n.jsx)("div",{className:"stat-label",children:"Total Balance"})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"\uD83D\uDCCA"}),(0,n.jsx)("div",{className:"stat-value",children:U}),(0,n.jsx)("div",{className:"stat-label",children:"Active Funds"})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"\uD83D\uDC65"}),(0,n.jsx)("div",{className:"stat-value",children:V}),(0,n.jsx)("div",{className:"stat-label",children:"Fee Collectors"})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"⚖️"}),(0,n.jsx)("div",{className:"stat-value",children:B?"Admin":L?"Treasurer":"Member"}),(0,n.jsx)("div",{className:"stat-label",children:"Your Role"})]})]})]}):(0,n.jsxs)("div",{className:"wallet-connection-prompt",children:[(0,n.jsx)("h3",{children:"Connect Your Wallet"}),(0,n.jsx)("p",{children:"Please connect your wallet to access Treasury Management features."}),(0,n.jsx)("button",{className:"connect-wallet-button",onClick:()=>a(!0),children:"Connect Wallet"})]}),l&&E&&E.length>0&&(0,n.jsxs)("div",{className:"funds-container",children:[(0,n.jsx)("h3",{children:"Treasury Funds"}),(0,n.jsx)("div",{className:"funds-list",children:E.map((e,s)=>(0,n.jsxs)("div",{className:"fund-card",children:[(0,n.jsxs)("div",{className:"fund-header",children:[(0,n.jsx)("div",{className:"fund-title",children:e.name}),(0,n.jsxs)("div",{className:"fund-allocation",children:[Math.floor(30*Math.random()+10),"% Allocation"]})]}),(0,n.jsx)("div",{className:"fund-progress",children:(0,n.jsx)("div",{className:"fund-progress-bar",style:{width:"".concat(Number(e.balance)/Number(K)*100,"%")}})}),(0,n.jsxs)("div",{className:"fund-details",children:[(0,n.jsxs)("div",{className:"fund-balance",children:["Balance: ",(0,i.d)(e.balance||BigInt(0))," ETH"]}),(0,n.jsx)("div",{className:"fund-status",children:"Status: Active"})]})]},s))})]}),l&&P&&P.length>0&&(0,n.jsxs)("div",{className:"fee-collectors-container",children:[(0,n.jsx)("h3",{children:"Fee Collectors"}),(0,n.jsx)("div",{className:"fee-collectors-list",children:P.map((e,s)=>(0,n.jsxs)("div",{className:"collector-card",children:[(0,n.jsxs)("div",{className:"collector-info",children:[(0,n.jsx)("div",{className:"collector-name",children:e.name}),(0,n.jsxs)("div",{className:"collector-address",children:[e.collectorAddress.substring(0,6),"...",e.collectorAddress.substring(e.collectorAddress.length-4)]})]}),(0,n.jsxs)("div",{className:"collector-fee",children:["Fee Rate: ",e.feePercentage?"".concat(e.feePercentage,"%"):"Varies"]})]},s))})]}),l&&A&&A.length>0&&(0,n.jsxs)("div",{className:"transactions-container",children:[(0,n.jsx)("h3",{children:"Recent Transactions"}),(0,n.jsxs)("table",{className:"transactions-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Address"}),(0,n.jsx)("th",{children:"Amount"}),(0,n.jsx)("th",{children:"Type"}),(0,n.jsx)("th",{children:"Date"}),(0,n.jsx)("th",{children:"Fund"})]})}),(0,n.jsx)("tbody",{children:A.map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{className:"transaction-address",children:[e.from.substring(0,6),"...",e.from.substring(e.from.length-4)]}),(0,n.jsxs)("td",{className:"transaction-amount",children:[e.amount," ETH"]}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:"transaction-type ".concat(e.type),children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})}),(0,n.jsx)("td",{children:e.date}),(0,n.jsx)("td",{children:e.fund||"-"})]},s))})]})]}),l&&B&&(0,n.jsxs)("div",{className:"create-fund-container",children:[(0,n.jsx)("h3",{children:"Create New Fund"}),(0,n.jsxs)("div",{className:"create-fund-form",children:[(0,n.jsxs)("div",{className:"fund-form-group",children:[(0,n.jsx)("label",{htmlFor:"fund-name",children:"Fund Name"}),(0,n.jsx)("input",{type:"text",id:"fund-name",placeholder:"e.g., Disaster Relief",value:j,onChange:e=>v(e.target.value)})]}),(0,n.jsxs)("div",{className:"fund-form-group",children:[(0,n.jsx)("label",{htmlFor:"fund-allocation",children:"Allocation (%)"}),(0,n.jsx)("input",{type:"number",id:"fund-allocation",placeholder:"e.g., 20",min:"1",max:"100",value:g,onChange:e=>N(e.target.value)})]}),(0,n.jsx)("button",{className:"create-fund-button",onClick:X,disabled:O||S,children:O||S?"Processing...":"Create Fund"})]}),b&&(0,n.jsx)("div",{className:"error-message",children:b}),y&&(0,n.jsxs)("div",{className:"success-message",children:[(0,n.jsx)("p",{children:y}),C&&(0,n.jsxs)("p",{className:"transaction-hash",children:["Transaction Hash: ",(0,n.jsxs)("a",{href:"https://sepolia-explorer.arbitrum.io/tx/".concat(C),target:"_blank",rel:"noopener noreferrer",children:[C.substring(0,10),"...",C.substring(C.length-8)]})]})]})]})]}),(0,n.jsx)("div",{className:"footer-banner",children:(0,n.jsx)("p",{children:"Copyright \xa9 Pasifika 2025"})})]})}a(26338)},37374:function(e,s,a){"use strict";a.d(s,{v:function(){return useDarkMode}});var n=a(2265);let checkIsDarkSchemePreferred=()=>{var e,s,a,n;return null!==(n=null===(s=(a=window).matchMedia)||void 0===s?void 0:null===(e=s.call(a,"(prefers-color-scheme:dark)"))||void 0===e?void 0:e.matches)&&void 0!==n&&n};function useDarkMode(){let[e,s]=(0,n.useState)(checkIsDarkSchemePreferred);return(0,n.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),handleChange=()=>s(checkIsDarkSchemePreferred());return e.addEventListener("change",handleChange),()=>e.removeEventListener("change",handleChange)},[]),{isDarkMode:e}}},98065:function(){},90668:function(){},75185:function(){}},function(e){e.O(0,[1473,7346,1165,5559,7769,9056,8835,7860,9958,2002,9240,749,7611,596,2445,6338,2971,2472,1744],function(){return e(e.s=7975)}),_N_E=e.O()}]);