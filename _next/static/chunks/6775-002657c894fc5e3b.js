(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6775],{50422:function(e,t,o){"use strict";o.d(t,{Z:function(){return PasifikaWalletConnect}});var r=o(57437),n=o(2265),s=o(79471),l=o(44470),a=o.n(l);let i=void 0!==window.ethereum,getLeatherWallet=()=>window.btc&&"function"==typeof window.btc.request?window.btc:window.LeatherProvider&&"function"==typeof window.LeatherProvider.request?window.LeatherProvider:null,getXverseWallet=()=>window.XverseProviders&&window.XverseProviders.StacksProvider&&window.XverseProviders.StacksProvider.request?window.XverseProviders.StacksProvider:window.xverse&&window.xverse.request?window.xverse:null,c=[{id:"leather",name:"Leather Wallet",icon:"\uD83D\uDD36",description:"Connect with Leather Wallet for Stacks",downloadUrl:"https://leather.io/",isAvailable:()=>!!getLeatherWallet(),connect:async()=>{let e=getLeatherWallet();if(!e)throw Error("Leather Wallet not found");try{let t;console.log("Attempting to connect to Leather wallet..."),console.log("Wallet object:",e);try{console.log("Trying stx_requestAccounts..."),t=await e.request("stx_requestAccounts"),console.log("Leather stx_requestAccounts response:",t)}catch(o){console.log("stx_requestAccounts failed:",o);try{console.log("Trying object format request..."),t=await e.request({method:"stx_requestAccounts"}),console.log("Leather object format response:",t)}catch(r){console.log("Object format failed:",r);try{console.log("Trying getAddresses..."),t=await e.request("getAddresses"),console.log("Leather getAddresses response:",t)}catch(e){throw console.log("getAddresses failed:",e),o}}}let o=[];if(t&&t.result&&t.result.addresses?o=t.result.addresses.map(e=>e.address||e):t&&t.addresses?o=t.addresses.map(e=>e.address||e):Array.isArray(t)?o=t.map(e=>e.address||e):t&&"string"==typeof t&&(o=[t]),console.log("Parsed addresses:",o),o.length>0)return o;throw Error("No accounts returned from Leather")}catch(t){if(console.error("Leather connection error details:",{error:t,message:t.message,code:t.code,stack:t.stack}),4001===t.code)throw Error("Connection rejected by user");let e=t.message||t.toString()||"Unknown error";throw Error("Failed to connect to Leather Wallet: ".concat(e))}}},{id:"xverse",name:"Xverse Wallet",icon:"âš¡",description:"Connect with Xverse Wallet for Bitcoin & Stacks",downloadUrl:"https://www.xverse.app/",isAvailable:()=>!!getXverseWallet(),connect:async()=>{let e=getXverseWallet();if(!e)throw Error("Xverse Wallet not found");try{let t;try{t=await e.request("stx_requestAccounts")}catch(o){try{t=await e.request({method:"stx_requestAccounts"})}catch(o){t=await e.request("requestAccounts")}}if(t&&t.result&&t.result.addresses&&t.result.addresses.length>0)return t.result.addresses;if(t&&Array.isArray(t)&&t.length>0)return t;if(t&&"string"==typeof t)return[t];throw Error("No accounts returned from Xverse")}catch(e){throw console.error("Xverse connection error:",e),Error("Failed to connect to Xverse Wallet: ".concat(e.message))}}}];function PasifikaWalletConnect(){let{primaryWallet:e,handleLogOut:t,sdkHasLoaded:o}=(0,s.SX)(),[l,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(""),[w,x]=(0,n.useState)(!1),[p,g]=(0,n.useState)("stacks"),[f,v]=(0,n.useState)(null),[m,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{e&&l&&(d(!1),h(""))},[e,l]),(0,n.useEffect)(()=>{{let checkWallets=()=>{console.log("=== WALLET AVAILABILITY CHECK ===");let e=getLeatherWallet();console.log("Leather wallet detected:",!!e),e&&(console.log("Leather wallet object:",e),console.log("Leather has request method:","function"==typeof e.request));let t=getXverseWallet();console.log("Xverse wallet detected:",!!t),t&&(console.log("Xverse wallet object:",t),console.log("Xverse has request method:","function"==typeof t.request)),console.log("MetaMask detected:",i);let o=[];window.btc&&o.push("window.btc"),window.leather&&o.push("window.leather"),window.LeatherProvider&&o.push("window.LeatherProvider"),window.StacksProvider&&o.push("window.StacksProvider"),window.hiro&&o.push("window.hiro"),window.HiroWalletProvider&&o.push("window.HiroWalletProvider"),window.XverseProviders&&o.push("window.XverseProviders"),window.xverse&&o.push("window.xverse"),console.log("Available wallet objects:",o),console.log("=== END WALLET CHECK ==="),b(e=>e)};checkWallets();let e=setTimeout(checkWallets,1e3);return()=>clearTimeout(e)}},[]),(0,n.useEffect)(()=>{let e;return u&&(e=setTimeout(()=>{h("")},5e3)),()=>clearTimeout(e)},[u]);let handleStacksWalletConnect=async e=>{if(h(""),!e.isAvailable()){h("".concat(e.name," not detected. Please install ").concat(e.name," extension."));return}try{d(!0);let t=await e.connect(),o=null;if(Array.isArray(t)&&t.length>0?o=t[0]:t&&t.addresses&&t.addresses.length>0?o=t.addresses[0]:t&&"string"==typeof t&&(o=t),o)v({...e,address:o}),b(!1),h("");else throw Error("No account address received")}catch(t){console.error("".concat(e.name," connection error:"),t),h("Failed to connect to ".concat(e.name,". ").concat(t.message||"Please try again."))}finally{d(!1)}},handleDisconnectWallet=async()=>{try{f&&(v(null),b(!1)),t&&e&&(await t(),setTimeout(()=>{d(!1)},500)),d(!1),g("stacks"),b(!1)}catch(e){console.error("Wallet disconnect error:",e),h("Failed to disconnect wallet. Please try again.")}};return o?(0,r.jsxs)("div",{className:a()["pasifika-wallet-connect"],children:[u&&(0,r.jsx)("div",{style:{background:"rgba(255, 0, 0, 0.1)",border:"1px solid #ff0000",color:"#ff0000",padding:"10px 15px",borderRadius:"5px",marginBottom:"15px",fontSize:"14px"},children:u}),e||f?(0,r.jsxs)("div",{className:a()["connected-wallet"],children:[(0,r.jsx)("div",{className:a()["wallet-info"],children:f?(0,r.jsxs)("p",{className:a()["wallet-address"],children:[(0,r.jsxs)("strong",{children:[f.name," Connected:"]})," ",f.address.slice(0,6),"...",f.address.slice(-4)]}):(0,r.jsxs)("p",{className:a()["wallet-address"],children:[(0,r.jsx)("strong",{children:"Connected:"})," ",e.address.slice(0,6),"...",e.address.slice(-4)]})}),(0,r.jsx)("button",{className:a()["disconnect-button"],onClick:handleDisconnectWallet,children:"Disconnect Wallet"})]}):(0,r.jsx)("div",{className:"connect-wallet-container",style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",margin:"20px 0"},children:l&&"evm"===p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.eb,{}),(0,r.jsx)("button",{onClick:()=>d(!1),style:{background:"none",border:"none",textDecoration:"underline",color:"#666",cursor:"pointer",marginTop:"15px",fontSize:"14px"},children:"Cancel Connection"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},children:[(0,r.jsx)("h3",{style:{color:"#333",marginBottom:"15px",fontSize:"18px"},children:"Choose Your Wallet"}),(0,r.jsx)("button",{onClick:()=>{console.log("=== MANUAL WALLET DEBUG ==="),console.log("window.btc:",window.btc),console.log("window.XverseProviders:",window.XverseProviders),console.log("Leather detected:",!!getLeatherWallet()),console.log("Xverse detected:",!!getXverseWallet()),window.btc&&console.log("window.btc methods:",Object.getOwnPropertyNames(window.btc)),window.XverseProviders&&window.XverseProviders.StacksProvider&&console.log("window.XverseProviders.StacksProvider methods:",Object.getOwnPropertyNames(window.XverseProviders.StacksProvider))},style:{padding:"4px 8px",fontSize:"12px",background:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",marginBottom:"15px"},children:"\uD83D\uDD0D Debug Wallets"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:"20px"},children:[(0,r.jsx)("button",{onClick:()=>g("stacks"),style:{padding:"8px 16px",borderRadius:"20px",border:"stacks"===p?"2px solid #FF5722":"2px solid #ddd",background:"stacks"===p?"#FF5722":"white",color:"stacks"===p?"white":"#666",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s ease"},children:"\uD83D\uDD36 Stacks Wallets"}),(0,r.jsx)("button",{onClick:()=>g("evm"),style:{padding:"8px 16px",borderRadius:"20px",border:"evm"===p?"2px solid #FF5722":"2px solid #ddd",background:"evm"===p?"#FF5722":"white",color:"evm"===p?"white":"#666",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.3s ease"},children:"\uD83E\uDD8A MetaMask"})]})]}),"stacks"===p&&(0,r.jsxs)("div",{style:{width:"100%",maxWidth:"500px"},children:[(0,r.jsx)("div",{style:{marginBottom:"15px",textAlign:"center"},children:(0,r.jsx)("p",{style:{color:"#666",fontSize:"14px",margin:"0 0 20px 0"},children:"Connect with Bitcoin-secured Stacks wallets for the best experience"})}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:c.map(e=>(0,r.jsxs)("button",{onClick:()=>handleStacksWalletConnect(e),disabled:l,style:{display:"flex",alignItems:"center",padding:"16px 20px",border:e.isAvailable()?"2px solid #e0e0e0":"2px solid #ffcccb",borderRadius:"12px",background:e.isAvailable()?"white":"#f9f9f9",cursor:e.isAvailable()&&!l?"pointer":"not-allowed",transition:"all 0.3s ease",opacity:l?.6:1,textAlign:"left",width:"100%"},onMouseOver:t=>{e.isAvailable()&&!l&&(t.currentTarget.style.borderColor="#FF5722",t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 4px 12px rgba(255, 87, 34, 0.2)")},onMouseOut:t=>{e.isAvailable()&&!l&&(t.currentTarget.style.borderColor="#e0e0e0",t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="none")},children:[(0,r.jsx)("div",{style:{fontSize:"24px",marginRight:"15px"},children:e.icon}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)("div",{style:{fontWeight:"600",fontSize:"16px",color:"#333",marginBottom:"4px"},children:e.name}),(0,r.jsx)("div",{style:{fontSize:"13px",color:"#666"},children:e.isAvailable()?e.description:"".concat(e.name," not installed")})]}),!e.isAvailable()&&(0,r.jsx)("a",{href:e.downloadUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),style:{fontSize:"12px",color:"#FF5722",textDecoration:"none",fontWeight:"500",padding:"4px 8px",border:"1px solid #FF5722",borderRadius:"4px"},children:"Install"})]},e.id))})]}),"evm"===p&&(0,r.jsxs)("div",{style:{width:"100%",maxWidth:"400px",textAlign:"center"},children:[(0,r.jsx)("div",{style:{marginBottom:"15px"},children:(0,r.jsx)("p",{style:{color:"#666",fontSize:"14px",margin:"0 0 20px 0"},children:"Connect with MetaMask for future Bitcoin integration"})}),(0,r.jsx)("button",{onClick:()=>{if(h(""),!i){h("MetaMask not detected. Please install MetaMask extension."),x(!0);return}try{d(!0)}catch(e){console.error("Wallet connection error:",e),h("Failed to connect to wallet. Please try again."),d(!1)}},style:{display:"inline-block",padding:"12px 30px",background:"linear-gradient(to right, #FF5722, #FF9800)",color:"white",borderRadius:"30px",textDecoration:"none",fontSize:"16px",fontWeight:"500",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(255, 87, 34, 0.3)",border:"none",cursor:"pointer"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-3px)",e.currentTarget.style.boxShadow="0 6px 12px rgba(255, 87, 34, 0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 8px rgba(255, 87, 34, 0.3)"},children:"Connect MetaMask"})]}),w&&(0,r.jsxs)("div",{style:{marginTop:"20px",padding:"15px",background:"#f8f8f8",borderRadius:"8px",fontSize:"14px",maxWidth:"450px",textAlign:"center"},children:[(0,r.jsx)("p",{style:{fontWeight:"500",marginBottom:"10px"},children:"MetaMask Required"}),(0,r.jsx)("p",{children:"To connect your wallet, please install the MetaMask extension:"}),(0,r.jsx)("a",{href:"https://metamask.io/download/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"10px",color:"#FF5722",textDecoration:"none",fontWeight:"500"},children:"Download MetaMask"}),(0,r.jsx)("button",{onClick:()=>x(!1),style:{display:"block",margin:"15px auto 0",background:"none",border:"none",textDecoration:"underline",color:"#666",cursor:"pointer",fontSize:"13px"},children:"Dismiss"})]})]})})]}):(0,r.jsx)("div",{className:"loading-wallet",children:"Loading wallet connection..."})}},37374:function(e,t,o){"use strict";o.d(t,{v:function(){return useDarkMode}});var r=o(2265);let checkIsDarkSchemePreferred=()=>{var e,t,o,r;return null!==(r=null===(t=(o=window).matchMedia)||void 0===t?void 0:null===(e=t.call(o,"(prefers-color-scheme:dark)"))||void 0===e?void 0:e.matches)&&void 0!==r&&r};function useDarkMode(){let[e,t]=(0,r.useState)(checkIsDarkSchemePreferred);return(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),handleChange=()=>t(checkIsDarkSchemePreferred());return e.addEventListener("change",handleChange),()=>e.removeEventListener("change",handleChange)},[]),{isDarkMode:e}}},44470:function(e){e.exports={"pasifika-wallet-connect":"wallet_pasifika-wallet-connect___Xwjn","connected-wallet":"wallet_connected-wallet__bKDvr","wallet-info":"wallet_wallet-info__bO2o_","wallet-address":"wallet_wallet-address__1Wfcr","disconnect-button":"wallet_disconnect-button__7c3E2","connect-button":"wallet_connect-button__XNO8K","loading-wallet":"wallet_loading-wallet__OkDgO"}}}]);